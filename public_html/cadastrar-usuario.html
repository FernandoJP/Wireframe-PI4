<!DOCTYPE html>
<html lang="pt-br" ng-app="StarterApp">
    <head>
        <meta charset="UTF-8">
        <link rel="stylesheet" href="styles/cadastrar-usuario.css">
    </head>
    <body layout="row" ng-controller="AppCtrl">

    <md-content flex md-scroll-y  id="conteudo">
        <md-card md-theme="{{ showDarkTheme ? 'dark-grey' : 'default' }}" md-theme-watch="">
            <md-card-title>
                <md-card-title-text>
                    <span class="md-headline">Cadastrar Usuário</span>
                    <span class="md-subhead">Use este formulário para cadastrar um novo usuário no sistema.</span>
                </md-card-title-text>
                <md-card-title-media>
                    <div class="md-media-lg card-media"></div>
                </md-card-title-media>
            </md-card-title>

            <!--In�cio do Formul�rio-->
            <div id="formulario">
                <header id="form-header">
                    <h2>Novo Usuário </h2><span class="today-date"><i class="fa fa-calendar"></i>  {{date| date:'dd/MM/yyyy'}}</span>
                </header>
                <md-tabs md-dynamic-height md-stretch-tabs="always" class="md-primary" md-selected="tracking.selectedIndex">
                    <md-tab id="tab1" ng-disabled>
                        <md-tab-label>1 - Dados Pessoais</md-tab-label>
                        <md-tab-body>
                            <form name="formularioDados">
                                <div id="form-body">
                                    <div id="tab1-content">
                                        <div layout="row" style="margin-top:10px;">
                                             <button ng-click="tracking.displayMap();">teste</button>
                                            <md-input-container flex="50" class="md-accent">
                                                <label>Nome</label>
                                                <input name="nome" ng-model="dadosPessoais.nome" ng-required="true">
                                                <div ng-messages="formularioDados.nome.$error" ng-if="formularioDados.$submitted || formularioDados.nome.$touched">
                                                    <div ng-message="required">O campo nome é de preenchimento obrigatório.</div>
                                                </div>
                                            </md-input-container>
                                            <md-input-container flex="50" class="md-accent" ng-class="{
                                                    'md-input-invalid': cpfInvalido}">
                                                <label>CPF</label>
                                                <input name="cpf" ng-model="dadosPessoais.cpf" ng-required="true" ng-pattern="/^([0-9]){3}\.([0-9]){3}\.([0-9]){3}-([0-9]){2}$/">
                                                <div ng-messages="formularioDados.cpf.$error" ng-if="formularioDados.$submitted || formularioDados.cpf.$touched">
                                                    <div ng-message="required">O campo CPF é de preenchimento obrigatório.</div>
                                                    <div ng-message="pattern">Por favor informar um número de CPF válido.</div>
                                                </div>
                                            </md-input-container>
                                        </div>
                                        <div layout="row">
                                            <md-input-container flex="50" class="md-accent">
                                                <label>E-mail</label>
                                                <input type="email" name="email" ng-model="dadosPessoais.email" ng-required="true" ng-pattern="/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/">
                                                <div ng-messages="formularioDados.email.$error" ng-if="formularioDados.$submitted || formularioDados.email.$touched">
                                                    <div ng-message="required">O campo email é de preenchimento obrigatório.</div>
                                                    <div ng-message="pattern">Por favor informar um e-mail válido.</div>
                                                </div>
                                            </md-input-container>
                                            <md-input-container flex="50" class="md-accent">
                                                <label>Telefone</label>
                                                <input name="telefone" ng-model="dadosPessoais.telefone" ng-required="true">
                                                <div ng-messages="formularioDados.telefone.$error" ng-if="formularioDados.$submitted || formularioDados.telefone.$touched">
                                                    <div ng-message="required">O campo telefone é de preenchimento obrigatório.</div>
                                                </div>
                                            </md-input-container>
                                        </div>
                                        <div layout="row">
                                            <md-input-container flex="50" class="md-accent">
                                                <label>CEP</label>
                                                <input name="cep" ng-model="dadosPessoais.cep" ng-required="true">
                                                <div ng-messages="formularioDados.cep.$error" ng-if="formularioDados.$submitted || formularioDados.cep.$touched">
                                                    <div ng-message="required">O campo CEP é de preenchimento obrigatório.</div>
                                                </div>
                                            </md-input-container>
                                            <md-input-container flex="50" class="md-accent">
                                                <label>Logradouro</label>
                                                <input name="logradouro" ng-model="dadosPessoais.logradouro" ng-required="true">
                                                <div ng-messages="formularioDados.logradouro.$error" ng-if="formularioDados.$submitted || formularioDados.logradouro.$touched">
                                                    <div ng-message="required">O campo logradouro é de preenchimento obrigatório.</div>
                                                </div>
                                            </md-input-container>
                                        </div>
                                        <div layout="row" ng-controller="DemoController as vm">
                                            <md-input-container flex="50" class="md-accent">
                                                <label>Estado</label>
                                                <md-select class="md-accent" ng-model="dadosPessoais.estado" ng-change="vm.buscarCidadesPorSigla(dadosPessoais.estado)">
                                                <md-option ng-repeat="state in vm.states">{{state.nome}}</md-option>
                                                </md-select>
                                            </md-input-container>
                                            <md-input-container flex="50" class="md-accent" ng-if="dadosPessoais.estado">
                                                <label>Cidade</label>
                                                <md-select class="md-accent" ng-model="dadosPessoais.cidade">
                                                    <md-option ng-repeat="city in vm.cities">{{city}}</md-option>
                                                </md-select>
                                            </md-input-container>
                                        </div>
                                        <div layout="row">
                                            <md-input-container flex="50" class="md-accent">
                                                <label>Tipo de Acesso</label>
                                                <md-select class="md-accent"  name="tipoAcesso" ng-model="dadosPessoais.tipoAcesso" ng-required="true">
                                                    <md-option value="cliente">Cliente</md-option>
                                                    <md-option value="funcionario">Funcionário</md-option>
                                                </md-select>
                                                <div ng-messages="formularioDados.tipoAcesso.$error" ng-if="formularioDados.$submitted || formularioDados.tipoAcesso.$touched">
                                                    <div ng-message="required">O campo tipo de acesso é de preenchimento obrigatório.</div>
                                                </div>
                                            </md-input-container>

                                            <md-input-container flex="50" class="md-accent">
                                                <label>Cargo</label>
                                                <input name="cargo" ng-model="dadosPessoais.cargo" ng-required="true">
                                                <div ng-messages="formularioDados.cargo.$error" ng-if="formularioDados.$submitted || formularioDados.cargo.$touched">
                                                    <div ng-message="required">O campo cargo é de preenchimento obrigatório.</div>
                                                </div>
                                            </md-input-container>
                                        </div>
                                        <div class="form-actions noborder">             
                                            <md-button class="md-raised"><i class="material-icons" style="font-size: 1.4em">close</i> Cancelar</md-button>
                                            <md-button class="md-raised md-primary" ng-click="validarDadosPessoais(dadosPessoais, formularioDados)"><i class="material-icons">keyboard_arrow_right</i>Próximo</md-button>
                                        </div>
                                    </div>
                                </div>
                            </form>
                            
                        </md-tab-body>
                    </md-tab>
                    <md-tab id="tab2">
                        <md-tab-label>2 - Autenticação</md-tab-label>
                        <md-tab-body>
                            <form name="formAutenticacao" class="container-fluid formAutenticacao" ng-submit="formAutenticacao.$valid && submit()" novalidate>
                                <div class="row">
                                    <div class="col-xs-8">
                                        <md-input-container class="md-icon-float md-accent" >
                                            <label>Nome de usuário</label>
                                            <md-icon md-font-icon="fa fa-lock" style="color:#444444" ng-class="{
                                                    'clarear': focusA == true}"></md-icon>
                                            <input name="userName" ng-model="dadosAutenticacao.userName" ng-required="true" ng-minlength="5" ng-maxlength="50" required="" ng-focus="focusA = true" ng-blur="focusA = false">
                                            <div ng-messages="formAutenticacao.userName.$error" ng-if="formAutenticacao.$submitted || formAutenticacao.userName.$touched">
                                                <div ng-message="required">O campo nome de usuário é de preenchimento obrigatório.</div>
                                            </div>
                                        </md-input-container><br />
                                        <md-input-container class="md-icon-float md-accent" >
                                            <label>Senha</label>
                                            <md-icon md-font-icon="fa fa-lock" style="color:#444444" ng-class="{
                                                    'clarear': focusB == true}"></md-icon>
                                            <input name="senha" ng-model="dadosAutenticacao.senha" ng-required="true" ng-minlength="4" ng-maxlength="50" required="" ng-focus="focusB = true" ng-blur="focusB = false">
                                            <div ng-messages="formAutenticacao.senha.$error" ng-if="formAutenticacao.$submitted || formAutenticacao.senha.$touched">
                                                <div ng-message="required">O campo senha é de preenchimento obrigatório.</div>
                                            </div>
                                        </md-input-container>

                                    </div>
                                </div>
                                <div class="form-actions noborder">             
                                    <md-button class="md-raised"><i class="material-icons" style="font-size: 1.4em">close</i> Cancelar</md-button>
                                    <md-button class="md-raised md-primary" ng-click="validarDadosPessoais(dadosPessoais)"><i class="material-icons" style="font-size:1.3em;">save</i> Salvar</md-button>
                                </div>
                            </form>
                        </md-tab-body>
                    </md-tab>
                </md-tabs>
            </div>
        </md-card>
    </md-content>
</body>
</html>